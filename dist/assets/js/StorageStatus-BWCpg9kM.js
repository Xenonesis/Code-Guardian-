import{j as N,a5 as S,F as C,Z as A,aA as F,V as P,w as B,aB as I,ag as M,aC as D}from"./chunk-D-BOZomp.js";import{C as H,a as O,b as R,d as E,e as G,f as U,g as V,P as W,B as J}from"./index-Dvy03rTQ.js";import"./chunk-DmTu70FQ.js";import"./chunk-BxiuYxZ5.js";import"./chunk-BcnYpoAU.js";import"./chunk-BdhQYLz4.js";import"./chunk-JZiC37tc.js";const StorageStatus=({hasStoredData:K,storedAnalysis:L,storageStats:T,onClearData:Z,onExportAnalysis:$,onImportAnalysis:Q,onOptimizeStorage:X,onShowHistory:Y})=>{const formatBytes=N=>{if(0===N)return"0 Bytes";const i=Math.floor(Math.log(N)/Math.log(1024));return parseFloat((N/Math.pow(1024,i)).toFixed(2))+" "+["Bytes","KB","MB","GB"][i]};return N.jsxs(H,{className:"w-full bg-white/95 dark:bg-slate-800/95 backdrop-blur-sm border-0 shadow-lg",children:[N.jsx(O,{className:"pb-4",children:N.jsxs(R,{className:"flex items-center gap-2 text-lg",children:[N.jsx(S,{className:"h-5 w-5 text-blue-600"}),"Analysis Storage Status"]})}),N.jsxs(E,{className:"space-y-6",children:[K&&L?N.jsx("div",{className:"space-y-4",children:N.jsxs(G,{className:"border-l-4 border-l-blue-500 bg-blue-50 dark:bg-blue-950/20",children:[N.jsx(C,{className:"h-4 w-4"}),N.jsx(U,{children:N.jsxs("div",{className:"space-y-2",children:[N.jsx("div",{className:"font-semibold text-blue-900 dark:text-blue-100",children:"Stored Analysis Available"}),N.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm text-blue-800 dark:text-blue-200",children:[N.jsxs("div",{children:[N.jsx("strong",{children:"File:"})," ",L.fileName]}),N.jsxs("div",{children:[N.jsx("strong",{children:"Size:"})," ",formatBytes(L.fileSize)]}),N.jsxs("div",{children:[N.jsx("strong",{children:"Analyzed:"})," ",(ee=L.timestamp,new Date(ee).toLocaleString())]}),N.jsxs("div",{children:[N.jsx("strong",{children:"Issues:"})," ",L.results.issues.length]})]}),L.compressed&&N.jsxs(V,{variant:"outline",className:"text-blue-600 border-blue-600",children:[N.jsx(A,{className:"h-3 w-3 mr-1"}),"Compressed"]})]})})]})}):N.jsxs(G,{className:"border-l-4 border-l-gray-400 bg-gray-50 dark:bg-gray-950/20",children:[N.jsx(C,{className:"h-4 w-4"}),N.jsx(U,{className:"text-gray-700 dark:text-gray-300",children:"No analysis data currently stored. Upload and analyze a file to enable persistent storage."})]}),N.jsxs("div",{className:"space-y-4",children:[N.jsxs("div",{className:"flex items-center justify-between",children:[N.jsxs("div",{className:"flex items-center gap-2",children:[N.jsx(F,{className:"h-4 w-4 text-slate-600"}),N.jsx("span",{className:"font-medium",children:"Storage Usage"})]}),(_=T.usagePercentage,_<50?N.jsx(V,{variant:"outline",className:"text-green-600 border-green-600",children:"Good"}):_<80?N.jsx(V,{variant:"outline",className:"text-yellow-600 border-yellow-600",children:"Moderate"}):N.jsx(V,{variant:"outline",className:"text-red-600 border-red-600",children:"High"}))]}),N.jsxs("div",{className:"space-y-2",children:[N.jsxs("div",{className:"flex justify-between text-sm",children:[N.jsxs("span",{className:"text-slate-600 dark:text-slate-400",children:[formatBytes(T.currentSize)," / ",formatBytes(T.maxSize)]}),N.jsxs("span",{className:`font-medium ${(N=>N<50?"text-green-600 dark:text-green-400":N<80?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400")(T.usagePercentage)}`,children:[T.usagePercentage.toFixed(1),"%"]})]}),N.jsx(W,{value:T.usagePercentage,className:"h-2"})]}),N.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-2",children:[N.jsxs("div",{className:"text-center p-3 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[N.jsx("div",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:T.historyCount}),N.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:"History Items"})]}),T.compressionRatio&&N.jsxs("div",{className:"text-center p-3 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[N.jsxs("div",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:[(100*T.compressionRatio).toFixed(0),"%"]}),N.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Compression"})]})]})]}),N.jsxs("div",{className:"space-y-4",children:[N.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[N.jsxs("div",{className:"space-y-2",children:[N.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Export Analysis"}),N.jsxs("div",{className:"flex gap-2",children:[N.jsxs(J,{variant:"outline",size:"sm",onClick:()=>$("json"),disabled:!K,className:"flex-1",children:[N.jsx(P,{className:"h-4 w-4 mr-1"}),"JSON"]}),N.jsxs(J,{variant:"outline",size:"sm",onClick:()=>$("compressed"),disabled:!K,className:"flex-1",children:[N.jsx(P,{className:"h-4 w-4 mr-1"}),"Compressed"]})]})]}),N.jsxs("div",{className:"space-y-2",children:[N.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Import Analysis"}),N.jsxs("div",{className:"relative",children:[N.jsx("input",{type:"file",accept:".json,.txt",onChange:N=>{var S;const C=null==(S=N.target.files)?void 0:S[0];if(C){const N=new FileReader;N.onload=e=>{var N;const S=null==(N=e.target)?void 0:N.result,A=C.name.endsWith(".txt");try{Q(S,A)}catch(F){alert("Failed to import analysis data. Please check the file format.")}},N.readAsText(C)}},className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer","aria-label":"Import analysis data file",title:"Import analysis data file"}),N.jsxs(J,{variant:"outline",size:"sm",className:"w-full",children:[N.jsx(B,{className:"h-4 w-4 mr-1"}),"Choose File"]})]})]})]}),N.jsxs("div",{className:"flex flex-wrap gap-2",children:[N.jsxs(J,{variant:"outline",size:"sm",onClick:Y,className:"flex items-center gap-1",children:[N.jsx(I,{className:"h-4 w-4"}),"View History (",T.historyCount,")"]}),N.jsxs(J,{variant:"outline",size:"sm",onClick:X,className:"flex items-center gap-1",disabled:T.usagePercentage<50,children:[N.jsx(M,{className:"h-4 w-4"}),"Optimize Storage"]}),N.jsxs(J,{variant:"outline",size:"sm",onClick:Z,disabled:!K,className:"flex items-center gap-1 text-red-600 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-950/20",children:[N.jsx(D,{className:"h-4 w-4"}),"Clear Data"]})]})]}),T.usagePercentage>80&&N.jsx(G,{className:"border-l-4 border-l-orange-500 bg-orange-50 dark:bg-orange-950/20",children:N.jsxs(U,{className:"text-orange-800 dark:text-orange-200",children:[N.jsx("strong",{children:"Storage Warning:"})," Storage usage is high (",T.usagePercentage.toFixed(1),"%). Consider optimizing storage or clearing old data."]})}),T.usagePercentage>95&&N.jsx(G,{className:"border-l-4 border-l-red-500 bg-red-50 dark:bg-red-950/20",children:N.jsxs(U,{className:"text-red-800 dark:text-red-200",children:[N.jsx("strong",{children:"Storage Critical:"})," Storage is nearly full. New analyses may fail to save."]})})]})]});var _,ee};export{StorageStatus,StorageStatus as default};
