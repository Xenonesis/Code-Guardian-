import{r as N,j as A,s as I,aF as P,K as S,aG as C,a9 as K,aC as F,T as O}from"./chunk-D-BOZomp.js";import{c as $,s as G,C as M,a as T,b as E,h as R,d as B,B as D,e as J,f as L,g as Y,S as H,i as V,j as Q,k as U,l as W,I as X}from"./index-Dvy03rTQ.js";import{u as Z}from"./chunk-BcnYpoAU.js";import{aB as _}from"./chunk-BxiuYxZ5.js";import"./chunk-DmTu70FQ.js";import"./chunk-BdhQYLz4.js";import"./chunk-JZiC37tc.js";const ee=_("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),se=N.forwardRef(({className:N,...I},P)=>A.jsx(Z,{ref:P,className:$(ee(),N),...I}));se.displayName=Z.displayName;const ae=[{id:"openai",name:"OpenAI",icon:"\ud83e\udd16",description:"GPT-4 powered analysis"},{id:"gemini",name:"Google Gemini",icon:"\ud83d\udc8e",description:"Advanced code understanding"},{id:"claude",name:"Anthropic Claude",icon:"\ud83e\udde0",description:"Detailed security insights"},{id:"mistral",name:"Mistral AI",icon:"\u26a1",description:"Fast and efficient analysis"}],AIKeyManager=()=>{const[$,Z]=N.useState([]),[_,ee]=N.useState({provider:"",key:"",name:""}),[re,ie]=N.useState({}),[te,le]=N.useState(!1),[de,ne]=N.useState({}),[ce,me]=N.useState(!1);N.useEffect(()=>{const N=localStorage.getItem("aiApiKeys");if(N)try{const A=JSON.parse(N);Z(A)}catch(A){}},[]),N.useEffect(()=>{G("aiApiKeys",JSON.stringify($))},[$]);const maskKey=N=>N.length<=8?"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022":N.substring(0,4)+"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"+N.substring(N.length-4);return A.jsxs(M,{className:"w-full max-w-4xl mx-auto card-hover animate-fade-in",children:[A.jsxs(T,{children:[A.jsxs(E,{className:"flex items-center gap-2 text-xl sm:text-2xl",children:[A.jsx(I,{className:"h-5 w-5 sm:h-6 sm:w-6 text-purple-600"}),"AI Analysis Integration"]}),A.jsx(R,{className:"text-sm sm:text-base",children:"Connect your AI API keys to get enhanced code analysis with natural language insights and chat assistance"})]}),A.jsxs(B,{className:"space-y-4 sm:space-y-6",children:[A.jsxs("section",{"aria-labelledby":"providers-title",children:[A.jsx("h3",{id:"providers-title",className:"text-base sm:text-lg font-semibold mb-3",children:"Supported AI Providers"}),A.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:ae.map((N,I)=>A.jsxs("div",{className:`flex items-center gap-3 p-3 sm:p-4 border rounded-lg hover:border-purple-300 dark:hover:border-purple-600 transition-colors duration-200 card-hover animate-fade-in animate-stagger-${Math.min(I+1,4)}`,role:"article","aria-labelledby":`provider-${N.id}-name`,children:[A.jsx("span",{className:"text-xl sm:text-2xl","aria-hidden":"true",children:N.icon}),A.jsxs("div",{children:[A.jsx("h4",{id:`provider-${N.id}-name`,className:"font-medium text-sm sm:text-base",children:N.name}),A.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:N.description})]})]},N.id))})]}),A.jsxs("section",{"aria-labelledby":"api-keys-title",children:[A.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 mb-3",children:[A.jsx("h3",{id:"api-keys-title",className:"text-base sm:text-lg font-semibold",children:"Your API Keys"}),A.jsxs(D,{onClick:()=>le(!0),className:"flex items-center gap-2 focus-ring",disabled:te,size:"sm",children:[A.jsx(P,{className:"h-4 w-4"}),A.jsx("span",{className:"hidden sm:inline",children:"Add API Key"}),A.jsx("span",{className:"sm:hidden",children:"Add Key"})]})]}),0===$.length&&!te&&A.jsxs(J,{className:"animate-fade-in",children:[A.jsx(S,{className:"h-4 w-4"}),A.jsx(L,{className:"text-sm sm:text-base",children:"No API keys configured. Add your first API key to enable AI-powered analysis and chat assistance."})]}),A.jsxs("div",{className:"space-y-3",children:[$.map((N,I)=>{const P=(S=N.provider,ae.find(p=>p.id===S));var S;return A.jsxs("div",{className:`flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 sm:gap-4 p-3 sm:p-4 border rounded-lg bg-gray-50 dark:bg-gray-800 hover:border-purple-300 dark:hover:border-purple-600 transition-colors duration-200 animate-fade-in animate-stagger-${Math.min(I+1,5)}`,children:[A.jsxs("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[A.jsx("span",{className:"text-lg sm:text-xl flex-shrink-0","aria-hidden":"true",children:null==P?void 0:P.icon}),A.jsxs("div",{className:"min-w-0 flex-1",children:[A.jsx("h4",{className:"font-medium text-sm sm:text-base truncate",children:N.name}),A.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 mt-1",children:[A.jsx(Y,{variant:"outline",className:"text-xs w-fit",children:null==P?void 0:P.name}),A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("span",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400 font-mono truncate max-w-[200px]",children:re[N.id]?N.key:maskKey(N.key)}),A.jsx(D,{variant:"ghost",size:"sm",onClick:()=>{return A=N.id,void ie(N=>({...N,[A]:!N[A]}));var A},className:"h-6 w-6 p-0 focus-ring","aria-label":re[N.id]?"Hide API key":"Show API key",children:re[N.id]?A.jsx(C,{className:"h-3 w-3 sm:h-4 sm:w-4"}):A.jsx(K,{className:"h-3 w-3 sm:h-4 sm:w-4"})})]})]})]})]}),A.jsx(D,{variant:"ghost",size:"sm",onClick:()=>{return A=N.id,void Z($.filter(N=>N.id!==A));var A},className:"text-red-600 hover:text-red-700 focus-ring self-end sm:self-auto","aria-label":`Remove ${N.name} API key`,children:A.jsx(F,{className:"h-4 w-4"})})]},N.id)}),te&&A.jsxs("div",{className:"p-4 border rounded-lg bg-blue-50 dark:bg-blue-950/20 space-y-4 animate-slide-down",children:[A.jsx("h4",{className:"font-medium text-sm sm:text-base",children:"Add New API Key"}),de.general&&A.jsxs(J,{className:"border-red-200 bg-red-50 dark:bg-red-950/20",children:[A.jsx(O,{className:"h-4 w-4 text-red-600"}),A.jsx(L,{className:"text-red-700 dark:text-red-300",children:de.general})]}),A.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[A.jsxs("div",{children:[A.jsxs(se,{htmlFor:"provider-select",className:"text-sm",children:["Provider ",A.jsx("span",{className:"text-red-500",children:"*"})]}),A.jsxs(H,{value:_.provider,onValueChange:N=>{ee({..._,provider:N}),de.provider&&ne(N=>({...N,provider:""}))},children:[A.jsx(V,{id:"provider-select",className:"focus-ring "+(de.provider?"border-red-500 focus:ring-red-500":""),children:A.jsx(Q,{placeholder:"Select provider"})}),A.jsx(U,{children:ae.map(N=>A.jsx(W,{value:N.id,children:A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("span",{children:N.icon}),A.jsx("span",{children:N.name})]})},N.id))})]}),de.provider&&A.jsx("p",{className:"text-red-500 text-xs mt-1",children:de.provider})]}),A.jsxs("div",{children:[A.jsxs(se,{htmlFor:"key-name",className:"text-sm",children:["Key Name ",A.jsx("span",{className:"text-red-500",children:"*"})]}),A.jsx(X,{id:"key-name",placeholder:"My OpenAI Key",value:_.name,onChange:e=>{ee({..._,name:e.target.value}),de.name&&ne(N=>({...N,name:""}))},className:"focus-ring "+(de.name?"border-red-500 focus:ring-red-500":""),"aria-describedby":de.name?"name-error":void 0}),de.name&&A.jsx("p",{id:"name-error",className:"text-red-500 text-xs mt-1",children:de.name})]}),A.jsxs("div",{children:[A.jsxs(se,{htmlFor:"api-key",className:"text-sm",children:["API Key ",A.jsx("span",{className:"text-red-500",children:"*"})]}),A.jsx(X,{id:"api-key",type:"password",placeholder:"sk-...",value:_.key,onChange:e=>{ee({..._,key:e.target.value}),de.key&&ne(N=>({...N,key:""}))},className:"focus-ring "+(de.key?"border-red-500 focus:ring-red-500":""),"aria-describedby":de.key?"key-error":void 0}),de.key&&A.jsx("p",{id:"key-error",className:"text-red-500 text-xs mt-1",children:de.key})]})]}),A.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[A.jsx(D,{onClick:async()=>{if(!ce){me(!0),ne({});try{if(!(()=>{const N={};return _.provider.trim()||(N.provider="Please select an AI provider"),_.name.trim()||(N.name="Please enter a name for this API key"),_.key.trim()?_.key.length<10&&(N.key="API key seems too short. Please check your key"):N.key="Please enter your API key",_.name.trim()&&$.some(N=>N.name.toLowerCase()===_.name.toLowerCase())&&(N.name="A key with this name already exists"),ne(N),0===Object.keys(N).length})())return void me(!1);const N={id:Date.now().toString(),provider:_.provider.trim(),key:_.key.trim(),name:_.name.trim()};Z(A=>[...A,N]),ee({provider:"",key:"",name:""}),le(!1),ne({})}catch(N){ne({general:"Failed to add API key. Please try again."})}finally{me(!1)}}},disabled:ce,className:"focus-ring",children:ce?A.jsxs(A.Fragment,{children:[A.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent mr-2"}),"Adding..."]}):"Add Key"}),A.jsx(D,{variant:"outline",onClick:()=>{le(!1),ee({provider:"",key:"",name:""}),ne({})},disabled:ce,className:"focus-ring",children:"Cancel"})]})]})]})]}),A.jsxs("section",{className:"space-y-4",children:[A.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[A.jsx(I,{className:"h-5 w-5"}),"AI-Powered Security Features"]}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[A.jsx(M,{className:"bg-gradient-to-br from-purple-50 to-blue-50 dark:from-purple-950/20 dark:to-blue-900/20",children:A.jsx(B,{className:"p-4",children:A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("div",{className:"p-2 bg-purple-500 rounded-lg",children:A.jsx(I,{className:"h-4 w-4 text-white"})}),A.jsxs("div",{children:[A.jsx("p",{className:"font-semibold text-purple-800 dark:text-purple-200",children:"AI Fix Suggestions"}),A.jsx("p",{className:"text-sm text-purple-600 dark:text-purple-400",children:$.length>0?"Available":"Requires API Key"})]})]})})}),A.jsx(M,{className:"bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-950/20 dark:to-indigo-900/20",children:A.jsx(B,{className:"p-4",children:A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("div",{className:"p-2 bg-blue-500 rounded-lg",children:A.jsx(S,{className:"h-4 w-4 text-white"})}),A.jsxs("div",{children:[A.jsx("p",{className:"font-semibold text-blue-800 dark:text-blue-200",children:"Secure Code Search"}),A.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Always Available"})]})]})})}),A.jsx(M,{className:"bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-950/20 dark:to-emerald-900/20",children:A.jsx(B,{className:"p-4",children:A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("div",{className:"p-2 bg-green-500 rounded-lg",children:A.jsx(O,{className:"h-4 w-4 text-white"})}),A.jsxs("div",{children:[A.jsx("p",{className:"font-semibold text-green-800 dark:text-green-200",children:"Code Provenance"}),A.jsx("p",{className:"text-sm text-green-600 dark:text-green-400",children:"Always Available"})]})]})})})]}),A.jsxs(J,{className:"bg-blue-50 border-blue-200 dark:bg-blue-950/20 dark:border-blue-800",children:[A.jsx(I,{className:"h-4 w-4 text-blue-600"}),A.jsxs(L,{className:"text-blue-800 dark:text-blue-200",children:[A.jsx("strong",{children:"AI Fix Suggestions"})," require at least one configured AI provider. The Secure Code Search Engine and Code Provenance features work without API keys."]})]})]}),A.jsxs(J,{className:"animate-fade-in",role:"note",children:[A.jsx(S,{className:"h-4 w-4","aria-hidden":"true"}),A.jsx(L,{className:"text-sm sm:text-base",children:"Your API keys are stored locally in your browser and are never sent to our servers. They are only used to communicate directly with the AI providers during analysis."})]})]})]})};export{AIKeyManager};
